From e104cbfb5e9fc744e155d07ab33fc2dbd68ccc38 Mon Sep 17 00:00:00 2001
From: Ryan Volz <rvolz@mit.edu>
Date: Fri, 10 Aug 2018 18:07:17 -0400
Subject: [PATCH] Fix build RPATH remaining on installed libpyuhd by not
 setting it.

---
 host/python/CMakeLists.txt | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/host/python/CMakeLists.txt b/host/python/CMakeLists.txt
index 124e166..728a383 100644
--- a/host/python/CMakeLists.txt
+++ b/host/python/CMakeLists.txt
@@ -28,6 +28,9 @@ TARGET_INCLUDE_DIRECTORIES(pyuhd PUBLIC
     ${CMAKE_SOURCE_DIR}/lib
 )
 TARGET_LINK_LIBRARIES(pyuhd ${BOOST_PYTHON_LIBRARY} ${Boost_LIBRARIES} ${PYTHON_LIBRARY} uhd)
+# skip setting pyuhd's RPATH because it is installed as a python data file so
+# the build RPATH would never be overwritten by an install RPATH
+SET_TARGET_PROPERTIES(pyuhd PROPERTIES SKIP_BUILD_RPATH ON BUILD_WITH_INSTALL_RPATH OFF)
 # Copy pyuhd library to the staging directory
 SET(PYUHD_LIBRARY_NAME ${CMAKE_SHARED_LIBRARY_PREFIX}pyuhd${CMAKE_SHARED_LIBRARY_SUFFIX})
 ADD_CUSTOM_COMMAND(TARGET pyuhd
-- 
2.7.4

